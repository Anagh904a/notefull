<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Notes App Onboarding</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Custom Font Import (Optional: Use a nice mobile-friendly font) */
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap');

    :root {
      --color-primary: #8B5CF6; /* Violet-500 */
      --color-secondary: #FFD700; /* Gold/Accent */
      --color-background-start: #1E1E3F; /* Dark Blue */
      --color-background-middle: #383177; /* Deeper Purple */
      --color-background-end: #0D0C29; /* Very Dark Blue */
    }

    body {
      font-family: 'Inter', sans-serif;
      overflow-x: hidden; /* Prevent horizontal scroll on mobile */
    }

    /* Enhanced Animated Gradient */
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    .animated-gradient {
      background: linear-gradient(135deg, var(--color-background-start), var(--color-background-middle), var(--color-background-end));
      background-size: 300% 300%;
      animation: gradientShift 15s ease infinite;
    }

    /* Fixed Button Styling */
    .bottom-button {
      position: fixed;
      bottom: 1.5rem; /* Increased spacing */
      left: 50%;
      transform: translateX(-50%);
      width: 90%; /* More mobile-friendly width */
      max-width: 400px;
      padding: 1rem;
      font-weight: 700; /* Bolder text */
      font-size: 1.15rem;
      border-radius: 0.75rem; /* Slightly less rounded than original */
      transition: all 0.3s ease-in-out;
      background: white; /* Default background */
      color: var(--color-background-start); /* Dark text for contrast */
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); /* Subtle shadow */
    }
    .bottom-button:hover {
      background: #f0f0f0;
      transform: translateX(-50%) translateY(-2px); /* Slight lift on hover/tap */
    }

    /* Step Container for Transitions */
    .step-container {
      position: absolute;
      width: 100%;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      transition: opacity 0.5s ease, transform 0.5s ease;
    }
    .step-container.hidden-step {
      opacity: 0;
      pointer-events: none;
      transform: translate(-50%, -50%) scale(0.95); /* Subtle exit effect */
    }

    /* Ensure content wrapper accommodates fixed button */
    .content-wrapper {
      position: relative; /* For absolute positioning of steps */
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0 5%;
      padding-bottom: 7rem; /* Space for the fixed button */
    }

    /* Custom input styling */
    .onboarding-input {
      background-color: rgba(255, 255, 255, 0.95);
      border: 2px solid transparent;
      transition: all 0.3s;
    }
    .onboarding-input:focus {
      border-color: var(--color-primary);
      box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.3);
      outline: none;
    }

    /* Special style for accent text */
    .accent-text {
      color: var(--color-secondary);
      -webkit-text-stroke: 1px var(--color-primary); /* Outline for contrast */
  
    }
  </style>
</head>
<body class="min-h-screen flex flex-col animated-gradient text-white">

  <div class="content-wrapper">

    <div id="step0" class="step-container text-center max-w-sm px-4">
      <h1 class="text-4xl font-extrabold leading-snug">
        Your Ideas, <span class="accent-text">Organized</span>.<br />
        <span class="text-gray-300 font-semibold text-2xl mt-2 block">Simple. Secure. Private.</span>
      </h1>
      </div>

    <div id="step1" class="step-container hidden-step text-center max-w-sm px-4">
      <div class="bg-white/10 p-6 rounded-2xl shadow-xl backdrop-blur-sm space-y-4">
        <h2 class="text-2xl font-bold text-white mb-4">Privacy First ðŸ”’</h2>
        <p class="text-sm text-gray-200 text-left space-y-3">
          <strong class="text-lg block">Your data belongs to you.</strong>
          <span class="block">1. All notes are stored **only on your device**.</span>
          <span class="block">2. No cloud uploads, no tracking, no data sharing.</span>
          <span class="block">3. The app is fully functional offline.</span>
        </p>
      </div>
    </div>

    <div id="step2" class="step-container hidden-step text-center max-w-sm px-4">
      <h2 class="text-2xl font-bold text-white mb-6">What should we call you?</h2>
      <input type="text" id="usernameInput" placeholder="Your Display Name"
             class="onboarding-input w-full px-5 py-3 rounded-xl text-lg text-gray-800 placeholder-gray-500 focus:ring-4 focus:ring-violet-400" />

      <p id="error-message" class="text-sm text-red-400 mt-2 hidden">Please enter a name to continue.</p>
      <p class="text-gray-300 text-xs mt-3">This name is stored locally to personalize your experience.</p>
    </div>

    <div id="step3" class="step-container hidden-step text-center max-w-sm px-4">
      <div class="space-y-6">
        <img src="https://cdn-icons-png.flaticon.com/512/3039/3039385.png" alt="Success Icon" class="w-24 h-24 mx-auto animate-bounce filter drop-shadow-lg" />
        <h2 class="text-4xl font-black text-white">You're Almost There ðŸŽ‰</h2>
        <p class="text-xl text-gray-200">Welcome, <span id="displayName" class="text-yellow-300 font-bold">User</span>.<br />Just One More step To Go</p>
      </div>
    </div>

  </div>

  <button id="mainButton" class="bottom-button" onclick="handleButtonClick()">Countinue</button>

  <script>
    const steps = document.querySelectorAll(".step-container");
    const mainButton = document.getElementById('mainButton');
    const usernameInput = document.getElementById('usernameInput');
    const displayNameSpan = document.getElementById('displayName');
    const errorMessage = document.getElementById('error-message');

    let currentStep = 0;

    const LOCAL_STORAGE_KEY_SETUP = 'notesAppSetupComplete';
    const LOCAL_STORAGE_KEY_USER = 'notesAppUser';

    /**
     * Checks if the setup is complete and redirects if necessary.
     */
async function checkModelExists() {
    try {
        
        const setupComplete = localStorage.getItem('notesAppSetupComplete');
        
        if (setupComplete === 'true') {
            // Both model downloaded and setup complete, redirect to main app
            window.location.href = 'indexAlpha.html';
        } 
    } catch (error) {
        console.error('Error checking model:', error);
    }
}

    /**
     * Toggles the visibility and class for the current step.
     */
    function showStep(stepIndex) {
      currentStep = stepIndex;

      steps.forEach((el, idx) => {
        const isCurrent = idx === stepIndex;
        // Use a class for animated visibility toggle
        el.classList.toggle('hidden-step', !isCurrent);
        // Ensure only the current step is visible (absolute positioning)
        el.style.zIndex = isCurrent ? '10' : '1';
      });

      // Update button text based on the new step
      switch(stepIndex) {
        case 0:
          mainButton.textContent = 'Get Started';
          break;
        case 1:
          mainButton.textContent = 'Agree & Create Account';
          break;
        case 2:
          const savedName = localStorage.getItem(LOCAL_STORAGE_KEY_USER) || '';
          usernameInput.value = savedName; // Pre-fill if name was previously entered
          mainButton.textContent = 'Looks Good! Continue';
          break;
        case 3:
          mainButton.textContent = 'Go';
          break;
        default:
          mainButton.textContent = 'Continue';
      }
    }

    /**
     * Handles the button click action for each step.
     */
    function handleButtonClick() {
      switch(currentStep) {
        case 0:
          showStep(1);
          break;
        case 1:
          showStep(2);
          // Focus the input field for better mobile UX
          setTimeout(() => usernameInput.focus(), 500);
          break;
        case 2:
          createLocalAccount();
          break;
        case 3:
          finalizeSetup();
          break;
      }
    }

    /**
     * Handles the logic for creating the local user account.
     */
    function createLocalAccount() {
      const username = usernameInput.value.trim();

      if (username.length === 0) {
        errorMessage.classList.remove('hidden');
        usernameInput.focus();
        return;
      }

      errorMessage.classList.add('hidden');

      // 1. Save the username to Local Storage
      localStorage.setItem(LOCAL_STORAGE_KEY_USER, username);

      // 2. Update the display name on the final step
      displayNameSpan.textContent = username;

      // 3. Move to the final step
      showStep(3);
    }

    /**
     * Marks setup as complete and redirects.
     */
    function finalizeSetup() {
      // 1. Mark setup as complete
      localStorage.setItem(LOCAL_STORAGE_KEY_SETUP, 'true');

      // 2. Alert and Redirect
      
      window.location.href = 'ai.html'; // Redirect to main app
    }

    // --- Initialization ---
    // Check if setup is already done when the page loads
    window.onload = checkModelExists;
  </script>

</body>
</html>
